<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<metal:block use-macro="here/cpsskins_global_defines/macros/defines" />
<html tal:define="
  global boxedit python:1;
  utool nocall:here/portal_url;
  mtool here/portal_membership;
  tmtool here/portal_themes;
  mcat python: tmtool.getTranslationService();
  base_url python: here.cpsskins_getBaseUrl();
  tmtool_url python: base_url + utool.getRelativeUrl(tmtool);
  theme_container_url python: base_url + utool.getRelativeUrl(theme_container);
  view_mode tmtool/getViewMode;
  scrollx view_mode/scrollx|python:0;
  scrolly view_mode/scrolly|python:0;
  panel view_mode/themes_panel|string:wysiwyg;
  selected_content view_mode/selected_content|nothing;
  portal_path python: utool.getPortalPath();
  cpsmcat python: tmtool.getTranslationService(cat='default');
  cpsskins_mcat python: request.get('cpsskins_mcat');
  checkPerm nocall:mtool/checkPermission">
<head>
  <metal:block use-macro="here/cpsskins_main_template_edit/macros/head" />
  <style type="text/css" media="all"
   tal:content="string: @import url(${base_url}cpsskins_theme_edit.css);" />
</head>

<body tal:attributes="onload string:javascript:scrollToCoordinates(${scrollx},${scrolly})">
  <div class="floatingHeader">
   <metal:block use-macro="here/cpsskins_theme_widgets/macros/navigate" />
   <tal:block define=" display_url_simulation python: panel != 'layout'"
    condition="python: panel in ['wysiwyg', 'layout', 'mixed']">
     <metal:block 
      use-macro="here/cpsskins_theme_widgets/macros/simulate_hierarchy" />
     <metal:block
      use-macro="here/cpsskins_theme_widgets/macros/content_add_panel" />
   </tal:block> 
  </div>

  <div class="editSpace">
   <metal:block use-macro="here/cpsskins_theme_widgets/macros/themetabs" />
    <tal:block condition="python: panel in ['wysiwyg', 'layout', 'mixed']">
      <metal:block use-macro="here/cpsskins_theme_widgets/macros/pagetabs" />
      <metal:block use-macro="here/cpsskins_main_template_edit/macros/main" />
    </tal:block> 

    <div i18n:domain="cpsskins"
     class="editForm" tal:condition="python: panel in ['theme', 'cache_manager', 'theme_optimizer', 'theme_exporter']">
      <h1>
        <tal:block define="title string:_Manage_"
         tal:content="python: mcat and mcat(title) or title"
         i18n:translate="" />
        '<tal:block replace="theme_container/title|nothing" />'
      </h1>
      <div class="statusmessage" i18n:translate=""
         tal:define="psm options/portal_status_message|request/portal_status_message|nothing"
         tal:condition="psm"
         tal:content="psm" />

      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/manage_themes" />
    </div> 

    <div class="editForm" tal:condition="python: panel == 'styles'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/styles" />
    </div> 
    <div class="editForm" tal:condition="python: panel == 'images'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/images" />
    </div> 
    <div class="editForm" tal:condition="python: panel == 'palettes'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/palettes" />
    </div> 

    <div class="editForm" tal:condition="python: panel == 'cache_manager'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/cache_manager" />
    </div> 
    <div class="editForm" tal:condition="python: panel == 'theme_optimizer'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/theme_optimizer" />
    </div> 
    <div class="editForm" tal:condition="python: panel == 'theme_exporter'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/theme_exporter" />
    </div> 

    <div class="editForm" tal:condition="python: panel == 'themes_manager'">
      <metal:block use-macro="here/cpsskins_theme_manage_lib/macros/themes_manager" />
    </div> 

  </div>

  </body>
</html>

<metal:block define-macro="palettes"
tal:define="
  palettes python: tmtool.listPalettes(palette_cat, here)['object']">
  <div class="panel" tal:repeat="palette palettes">
    <div onMouseover="this.style.backgroundColor='#fff'"
         onMouseout="this.style.background='#eee'">
      <a tal:define="value palette/value"
       tal:attributes="onClick string:javascript:selectPalette('$value', '$id');; toggle('$palette_cat')">
        <h1 tal:content="palette/title|nothing" />
        <p tal:content="value" />
        <tal:block content="structure python: palette.preview()" />
      </a>
    </div>
  </div>
</metal:block>

<metal:block define-macro="styles"
tal:define="
  styles python: tmtool.findStylesFor(style_cat, here)['object']">
  <div class="panel" tal:repeat="style styles">
    <div onMouseover="this.style.backgroundColor='#fff'"
         onMouseout="this.style.background='#eee'">
      <h1 tal:content="style/title|nothing" />
      <a tal:define="number repeat/style/number"
       tal:attributes="onClick string:javascript:selectStyle('$number', '$id');; toggle('$style_cat')"
       tal:content="structure python: style.preview()" />
    </div>
  </div>
</metal:block>

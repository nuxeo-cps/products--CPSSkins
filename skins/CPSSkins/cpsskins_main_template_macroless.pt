<metal:block define-macro="head" 
  tal:define="base_url python: request.get('cpsskins_base_url', '');
              theme_url python: base_url + utool.getRelativeUrl(theme_container)">
  <meta name="generator" content="CPSSkins 2.3" />
<!-- CSS1 -->
  <link rel="Stylesheet" type="text/css"
  tal:attributes="href string:${base_url}cpsskins_common.css" />
  <link rel="Stylesheet" type="text/css"
  tal:attributes="href string:${theme_url}/renderCSS" />
<!-- CSS2 -->
  <style type="text/css" media="all"
  tal:content="string: @import url(${base_url}cpsskins_common-css2.css);" />
<!-- JavaScript -->
  <script type="text/javascript" tal:attributes="src string:${here_url}/cpsskins_renderJS?theme=$current_theme"></script>
<!-- Shortcut icon -->
<tal:block content="structure theme_container/renderIcon" />
</metal:block>
<metal:block define-macro="main">
  <tal:block define="context_rurl request/form/context_rurl|nothing;
                     context_obj python: here.cpsskins_getContextObj(context_rurl);
                     dummy python: request.set('cpsskins_mcat', mcat)"
   content="structure python: theme_container.render(context_obj=context_obj)" />
</metal:block>

<metal:block define-macro="master">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
 tal:define="
  utool nocall:here/portal_url;
  mcat here/cpsskins_getlocalizer;
  here_url here/absolute_url;
  base_url python: here.cpsskins_getBaseUrl();
  theme_url python: base_url + utool.getRelativeUrl(theme_container);
  cpsskins_language tmtool/getCurrentLang;
  cpsskins_url here/cpsskins_getCurrentURL;
  charset here/cpsskins_getCharset;
  shield not:tmtool/debug_mode|python:1;
  dummy python: request.set('cpsskins_language', cpsskins_language);
  dummy python: request.set('cpsskins_url', cpsskins_url);
  dummy python: request.set('cpsskins_base_url', here.cpsskins_getBaseUrl());
  dummy python: request.set('cpsskins_mcat', mcat)"
 tal:attributes="lang cpsskins_language;
                 xml:lang cpsskins_language">
<head>
<metal:block define-macro="head"
 tal:define="theme_url python: base_url + utool.getRelativeUrl(theme_container);">
  <tal:block define="dummy python:request.RESPONSE.setHeader(
   'Content-Type', 'text/html;; charset=%s' % charset)" />
  <meta http-equiv="Content-Type" tal:attributes="
   content string:text/html;;charset=${charset}" />
  <meta name="generator" content="CPSSkins 2.3" />
<!-- CSS1 -->
  <link rel="Stylesheet" type="text/css"
  tal:attributes="href string:${base_url}cpsskins_common.css" />
  <link rel="Stylesheet" type="text/css"
  tal:attributes="href string:${theme_url}/renderCSS" />
<!-- CSS2 -->
  <style type="text/css" media="all"
  tal:content="string: @import url(${base_url}cpsskins_common-css2.css);" />
<!-- JavaScript -->
  <script type="text/javascript" tal:attributes="src string:${here_url}/cpsskins_renderJS?theme=$current_theme"></script>
<!-- Shortcut icon -->
  <tal:block content="structure theme_container/renderIcon" />
</metal:block>
</head>
<metal:block define-macro="main">
  <body tal:attributes="class string:color${theme_container/color};
                        style string:margin:${theme_container/margin};"
   tal:content="structure python: theme_container.render(context_obj=here)" />
</metal:block>
</html>
</metal:block>

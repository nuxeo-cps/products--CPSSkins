<metal:block define-macro="master">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
 tal:define="
  utool nocall:here/portal_url;
  tmtool here/portal_themes;
  mcat python: tmtool.getTranslationService();
  here_url here/absolute_url;
  base_url python: here.cpsskins_getBaseUrl();
  cpsskins_language python: tmtool.getCurrentLang();
  cpsskins_url python: here.cpsskins_getCurrentURL();
  dummy python: request.set('cpsskins_language', cpsskins_language);
  dummy python: request.set('cpsskins_url', cpsskins_url);
  dummy python: request.set('cpsskins_base_url', base_url);
  dummy python: request.set('cpsskins_mcat', mcat)"
 tal:attributes="lang cpsskins_language;
                 xml:lang cpsskins_language">
<head>
<title tal:content="here/title_or_id|nothing" />
<metal:block define-macro="head"
 tal:define="charset here/cpsskins_getCharset;
             theme_url python: base_url + utool.getRelativeUrl(theme_container);">
  <tal:block define="dummy python:request.RESPONSE.setHeader(
   'Content-Type', 'text/html;; charset=%s' % charset)" />
  <meta http-equiv="Content-Type" tal:attributes="
   content string:text/html;;charset=${charset}" />
  <meta name="generator" content="CPSSkins 2.3" />
<!-- CSS1 -->
  <link rel="Stylesheet" type="text/css"
  tal:attributes="href string:${base_url}cpsskins_common.css" />
  <link rel="Stylesheet" type="text/css"
  tal:attributes="href string:${theme_url}/renderCSS" />
<!-- CSS2 -->
  <style type="text/css" media="all"
  tal:content="string: @import url(${base_url}cpsskins_common-css2.css);" />
<!-- JavaScript -->
  <script type="text/javascript" tal:attributes="src string:${here_url}/cpsskins_renderJS?theme=$current_theme&amp;page=$current_page"></script>
<!-- Shortcut icon -->
  <tal:block content="structure theme_container/renderIcon" />
</metal:block>
</head>
<tal:block condition="nocall:page_container">
  <body tal:attributes="class string:color${page_container/color};
                        style string:margin:${page_container/margin};">
  <tal:block content="structure tmtool/renderAccessKey" />
  <metal:block define-macro="main">
    <tal:block content="structure python: page_container.render(context_obj=here)" />
  </metal:block>
  </body>
</tal:block>
</html>
</metal:block>

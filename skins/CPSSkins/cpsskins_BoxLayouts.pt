<!-- default box -->
<metal:block define-macro="standard">
  <div class="title">
    <metal:block define-slot="box_title">Box Title</metal:block>
  </div>
  <div class="body">
    <metal:block define-slot="box_body">Box Body</metal:block>
  </div>
</metal:block>

<!-- ============================================================ -->
<!-- a framed box -->
<metal:block define-macro="one_frame">
  <div class="body">
      <h4><metal:block define-slot="box_title">Box Title</metal:block></h4>
      <br/>
      <metal:block define-slot="box_body">Box Body</metal:block>
  </div>
</metal:block>

<!-- ============================================================ -->
<!-- a framed box without title  -->
<metal:block define-macro="notitle">
  <div class="body">
      <metal:block define-slot="box_body">Box Body</metal:block>
  </div>
</metal:block>

<!-- ============================================================ -->
<!-- A frameless box -->
<metal:block define-macro="no_frames">
  <div class="title" style="border: none">
     <metal:block define-slot="box_title">Box Title</metal:block>
  </div>
  <div class="body" style="border: none">
     <metal:block define-slot="box_body">Box Body</metal:block>
  </div>
</metal:block>

<!-- ============================================================ -->
<!-- A box with a frameless body and no title-->
<metal:block define-macro="notitle_noframe">
  <div class="body" style="border: none">
     <metal:block define-slot="box_body">Box Body</metal:block>
  </div>
</metal:block>

<!-- ============================================================ -->
<!-- drawer box -->
<metal:block define-macro="drawer" 
  tal:define="base_url python: request.get('cpsskins_base_url');
              orientation orientation|string:vertical;
              box_state python: here.getBoxState();
              boxid here/id">
  <div class="title">
    <metal:block define-slot="box_title">Box Title</metal:block>
  </div>
  <div class="body">
    <tal:block condition="python: box_state != 'minimized'">
      <metal:block define-slot="box_body">Box Body</metal:block>
    </tal:block>
    <div style="text-align: right">
      <a tal:condition="python: box_state == 'minimized'"
         tal:attributes="href string:${base_url}cpsskins_setBoxState?boxid=$boxid&state=maximized">
        <img src="" width="12" height="12" border="0"
         tal:attributes="src string:${base_url}cpsskins_images/drawer_open_$orientation.png" /></a>
      <a tal:condition="python: box_state != 'minimized'"
         tal:attributes="href string:${base_url}cpsskins_setBoxState?boxid=$boxid&state=minimized">
        <img src="" width="12" height="12" border="0"
         tal:attributes="src string:${base_url}cpsskins_images/drawer_close_$orientation.png" /></a>
    </div>
  </div>
</metal:block>

<!-- ============================================================ -->
<!-- drawer box without title -->
<metal:block define-macro="drawer_notitle" 
  tal:define="base_url python: request.get('cpsskins_base_url');
              orientation orientation|string:vertical;
              box_state python: here.getBoxState();
              boxid here/id">
  <div class="body">
    <tal:block condition="python: box_state != 'minimized'">
      <metal:block define-slot="box_body">Box Body</metal:block>
    </tal:block>
    <div style="text-align: right">
      <a tal:condition="python: box_state == 'minimized'"
         tal:attributes="href string:${base_url}cpsskins_setBoxState?boxid=$boxid&state=maximized">
        <img src="" width="12" height="12" border="0" 
         tal:attributes="src string:${base_url}cpsskins_images/drawer_open_$orientation.png" /></a>
      <a tal:condition="python: box_state != 'minimized'"
         tal:attributes="href string:${base_url}cpsskins_setBoxState?boxid=$boxid&state=minimized">
        <img src="" width="12" height="12" border="0"
         tal:attributes="src string:${base_url}cpsskins_images/drawer_close_$orientation.png" /></a>
    </div>
  </div>
</metal:block>

<!-- ============================================================ -->
<metal:block define-macro="min_max"
  tal:define="state portlet/getState;
              maximized python: state == 'maximized';
              portlet_url portlet/getURL;
              base_url python: request.get('cpsskins_base_url')">
  <div class="title buttons">
    <a tal:condition="not:maximized"
     tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=maximized">
     <img src="" width="16" height="16" border="0" alt=""
     tal:attributes="src string:${base_url}cpsskins_images/button_maximized.png" /></a>
    <a tal:condition="python: state != 'minimized'"
     tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=minimized">
     <img src="" width="16" height="16" border="0" alt=""
      tal:attributes="src string:${base_url}cpsskins_images/button_minimized.png" /></a>
    <metal:block define-slot="box_title">Box Title</metal:block>
    <br style="clear:right"/>
  </div>
  <div class="body" tal:attributes="style python:test(maximized, '', 'padding:0')"> 
    <tal:block tal:condition="maximized">
      <metal:block define-slot="box_body">Box Body</metal:block>
    </tal:block>
  </div>
</metal:block>

<!-- ============================================================ -->
<metal:block define-macro="min_max_close"
  tal:define="state portlet/getState;
              maximized python: state == 'maximized';
              portlet_url portlet/getURL;
              base_url python: request.get('cpsskins_base_url')">
  <tal:block tal:condition="python: state != 'closed'">
    <div class="title buttons">
      <a tal:condition="python: state != 'closed'"
      tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=closed">
       <img src="" width="16" height="16" border="0" alt="" 
       tal:attributes="src string:${base_url}cpsskins_images/button_close.png" /></a>
      <a tal:condition="not:maximized"
       tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=maximized">
       <img src="" width="16" height="16" border="0" alt="" 
       tal:attributes="src string:${base_url}cpsskins_images/button_maximized.png" /></a>
      <a tal:condition="python: state != 'minimized'"
       tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=minimized">
       <img src="" width="16" height="16" border="0" alt=""
       tal:attributes="src string:${base_url}cpsskins_images/button_minimized.png" /></a>
      <metal:block define-slot="box_title">Box Title</metal:block>
      <br style="clear:right"/>
    </div>
    <div class="body" tal:attributes="style python:test(maximized, '', 'padding:0')"> 
      <tal:block tal:condition="maximized">
        <metal:block define-slot="box_body">Box Body</metal:block>
      </tal:block>
    </div>
  </tal:block>
  <a tal:condition="python: state == 'closed'"
     tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=maximized">
     <img src="" width="16" height="16" border="0" 
     tal:attributes="src string:${base_url}cpsskins_images/button_maximized.png" />
    <metal:block define-slot="box_title">Box Title</metal:block>
  </a>
</metal:block>

<!-- ============================================================ -->
<metal:block define-macro="min_max_edit_close"
  tal:define="state portlet/getState;
              maximized python: state == 'maximized';
              portlet_url portlet/getURL;
              base_url python: request.get('cpsskins_base_url')">
  <tal:block tal:condition="python: state != 'closed'">
    <div class="title buttons">
      <a tal:condition="python: state != 'closed'"
      tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=closed">
       <img src="" width="16" height="16" border="0" alt="" 
       tal:attributes="src string:${base_url}cpsskins_images/button_close.png" /></a>
      <a
       tal:attributes="href string:${portlet_url}/edit_form">
       <img src="" width="16" height="16" border="0" alt=""
       tal:attributes="src string:${base_url}cpsskins_images/button_edit.png" /></a>
      <a tal:condition="not:maximized"
       tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=maximized">
       <img src="" width="16" height="16" border="0" alt="" 
       tal:attributes="src string:${base_url}cpsskins_images/button_maximized.png" /></a>
      <a tal:condition="python: state != 'minimized'"
       tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=minimized">
       <img src="" width="16" height="16" border="0" alt=""
       tal:attributes="src string:${base_url}cpsskins_images/button_minimized.png" /></a>
      <metal:block define-slot="box_title">Box Title</metal:block>
      <br style="clear:right"/>
    </div>
    <div class="body" tal:attributes="style python:test(maximized, '', 'padding:0')"> 
      <tal:block tal:condition="maximized">
        <metal:block define-slot="box_body">Box Body</metal:block>
      </tal:block>
    </div>
  </tal:block>
  <a tal:condition="python: state == 'closed'"
     tal:attributes="href string:${portlet_url}/cpsskins_setPortletState?state=maximized">
     <img src="" width="16" height="16" border="0" 
     tal:attributes="src string:${base_url}cpsskins_images/button_maximized.png" />
    <metal:block define-slot="box_title">Box Title</metal:block>
  </a>
</metal:block>

<!-- ============================================================ -->
<metal:block define-macro="portlet_edit"
 tal:define="utool nocall:here/portal_url;
             tmtool here/portal_themes;
             base_url python: request.get('cpsskins_base_url', '');
             fti portlet/getTypeInfo;
             portlet_icon fti/getIcon;
             portlet_id portlet/getId;
             portlet_title portlet/title_or_id;
             portlet_rurl portlet/getRelativeUrl;
             portlet_folder portlet/getLocalFolder;
             portlet_folder_rurl python: utool.getRelativeUrl(portlet_folder);
             view_mode tmtool/getViewMode;
             selected_portlet view_mode/selected_portlet|nothing;
             selected python: portlet_id == selected_portlet">
  <div class="title buttons">
    <a tal:attributes="onClick string:newWindow('${base_url}${portlet_rurl}/cpsskins_portlet_edit')">
      <img src="" width="16" height="16" border="0" alt=""
       tal:attributes="src string:${base_url}cpsskins_images/button_edit.png" /></a>
    <metal:block define-slot="box_title">Box Title</metal:block>
    <br style="clear:right"/>
  </div>
  <div class="PortletBoxDrag PortletBoxEditMenu"
   tal:define="ypos portlet/getOrder;
               group portlet/getSlot"
   tal:attributes="portlet_rurl portlet_rurl;
                   portlet_url string:${base_url}${portlet_rurl};
                   src_rurl portlet_folder_rurl;
                   src_ypos python: ypos and ypos or 0;
                   src_slot group;
                   icon portlet_icon;
                   title portlet_title;
                   portlet_id portlet_id;
                   portlet_folder portlet_folder_rurl;
                   folder_url string:${base_url}${portlet_folder_rurl}">
    <div class="PortletBoxDest"
     tal:attributes="dest_rurl portlet_folder_rurl;
                     dest_slot group;
                     dest_ypos python: ypos and ypos or 0;
                     style python:selected and 'border: 1px dashed Black' or 'border:none'">
      <div class="body">
        <metal:block define-slot="box_body">Box Body</metal:block>
      </div>
    </div>
  </div>
</metal:block>

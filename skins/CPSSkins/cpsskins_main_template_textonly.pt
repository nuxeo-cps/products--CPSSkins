<metal:block define-macro="head">
  <meta name="generator" content="CPSSkins 2.3" />
</metal:block>
<metal:block define-macro="main"
 tal:define="context_rurl python: '/' + utool.getRelativeUrl(here);
             dummy python: request.set('cpsskins_mcat', mcat)"
 tal:repeat="pageblock python: theme_container.getPageBlocks()">
  <tal:block define="closed python: pageblock['closed'];
                     maxcols python: pageblock['maxcols']"
   condition="python: (not closed and maxcols)">
    <tal:block define="objects python: pageblock.getObjects(REQUEST=request)"
     repeat="x_pos python: range(int(maxcols))">
      <tal:block define="objects_in_xpos python: objects.get(x_pos, None)"
       condition="objects_in_xpos">
        <tal:block define="templets_in_xpos python: objects_in_xpos['templets']">
          <tal:block repeat="templet templets_in_xpos">
            <tal:block
             define="isRenderable python: templet.isRenderable();
                     rendered python: isRenderable and templet.render_cache(shield=1, context_obj=here, context_rurl=context_rurl, enable_esi=enable_esi) or None;
                     display_title templet/display_title_in_text_mode|nothing;
                     hidden_in_text_mode templet/hidden_in_text_mode|nothing"
             condition="python: not hidden_in_text_mode and (rendered or not isRenderable)">
              <tal:block 
               define="templet_title templet/title|nothing"
               condition="python: templet_title and display_title">
                <h2 tal:content="structure python:mcat and mcat(templet_title) or templet_title" 
                 i18n:translate="" />
              </tal:block>
              <tal:block condition="isRenderable"
               content="structure rendered" />
              <tal:block condition="not:isRenderable">
                <tal:block condition="templet/isMainContent|nothing">
                  <metal:block define-slot="maincontent" />
                </tal:block>
                <tal:block condition="templet/isPortalBoxGroup|nothing">
                  <tal:block define="render_box python:1;
                                     box_group templet/box_group|nothing">
                    <metal:block use-macro="here/cpsskins_lib/macros/portalboxgroup" />
                  </tal:block>
                </tal:block>
              </tal:block>
            </tal:block>
          </tal:block>                               
        </tal:block>
      </tal:block>
    </tal:block>
  </tal:block>
</metal:block>

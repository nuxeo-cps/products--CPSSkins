<metal:block define-macro="portalboxgroup">
  <tal:block condition="render_box"
  define="padding templet/padding|string:0">

    <!-- Plone slot macros -->
    <tal:block on-error="nothing" 
     condition="python: box_group == 'left'" >
      <metal:leftportlets use-macro="here/portlets_fetcher/macros/left_column">
      </metal:leftportlets>
    </tal:block>
    <tal:block on-error="nothing" 
     condition="python: box_group == 'right'" >
      <metal:leftportlets use-macro="here/portlets_fetcher/macros/right_column">
      </metal:leftportlets>
    </tal:block>

    <!-- CPS Portlets -->
    <div tal:define="rendered python: templet.render_cache(shield=1, context_obj=here);
                     margin here/margin|string:0"
         tal:condition="python: rendered != ''"
         tal:attributes="style string:text-align:${templet/align};; padding:$margin"
         tal:content="structure rendered" />
  </tal:block>

  <div class="TempletPortalBoxGroup" tal:condition="not:render_box"
  style="text-align: left">
  <img tal:attributes="src string:${here/portal_url}/cpsskins_images/icon_plone.png"
       width="45" height="17" alt="Plone slot" />
  <tal:block content="templet_title" /> 
  (<span style="font-weight: bold" tal:content="templet/box_group" />)</div>
</metal:block>

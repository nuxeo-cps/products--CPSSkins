<metal:block define-macro="folder_view" tal:define="
  tmtool here/portal_themes;
  current_theme python: tmtool.getRequestedThemeName(context_obj=here);
  theme_container python: tmtool.getThemeContainer(theme=current_theme);
  current_page python: theme_container.getRequestedPageName(context_obj=here);
  page_container python: theme_container.getPageContainer(current_page);
  global macroless python: page_container.renderer == 'macroless'">

<tal:block condition="macroless"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <metal:block use-macro="here/cpsskins_main_template_macroless/macros/master" />
</tal:block>

<tal:block condition="not:macroless">
  <metal:block use-macro="here/folder_view_orig/macros/folder_view" />
</tal:block>
</metal:block>
